import Head from "next/head";
import { Inter } from "@next/font/google";
const inter = Inter({ subsets: ["latin"] });
import style from "../styles/Home.module.css";
import { headerData } from "./datas/headerData";
import { useState } from "react";

export default function Home() {
  type post = {
    name: String;
    body: String;
  };

  const [inputPostText, setInputPostText] = useState("");
  const [inputUsernameText, setInputUsernameText] = useState("");

  const [posts, setPosts] = useState<post[]>([
    {
      name: "aaaaa",
      body: "投稿内容1",
    },
    {
      name: "bbbbb",
      body: "投稿内容2",
    },
    {
      name: "cccccc",
      body: "<a href='https://openai.com/blog/chatgpt'>qqqq</a>",
    },
  ]);

  const onClickPostButton = () => {
    console.log(inputPostText);
    console.log(inputUsernameText);
    setPosts([...posts, { name: inputUsernameText, body: inputPostText }]);
    setInputPostText("");
    setInputUsernameText("");
  };

  // setTimeout(()=>window.location.href = "https://openai.com/blog/chatgpt",3000)

  return (
    <>
      <Head>
        <title>XSS practice</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <div className={style.body}>
        <div className={style.header}>
          <ul className={style.ul}>
            {headerData.map((data, index) => (
              <li className={style.headerListContent} key={index}>
                {data.title}
              </li>
            ))}
          </ul>
        </div>

        <div className={style.main}>
          <div className={style.mainContents}>
            <h1 className={style.boardTitle}>掲示板です</h1>

            {posts.map((post, index) => (
              <div className={style.Postcontent} key={index}>
                <div className={style.userInfo}>
                  <img></img>
                  <p>{post.name}</p>
                </div>

                <div className={style.postContent}>
                  <div
                    className={style.postText}
                    // dangerouslySetInnerHTML={{ __html: post.body }}

                    // dangerouslySetInnerHTML={{
                    //   __html: `<script>setTimeout(()=>window.location.href = "https://openai.com/blog/chatgpt",3000);</script>`,
                    // }}
                    // dangerouslySetInnerHTML={{
                    //   __html: `<button onclick="alert('attack from event handler')">Click Me</button>
                    // `,
                    // }}
                  />
                  {post.body}
                  <button>good!!</button>
                  <button>bad...</button>
                </div>

                <div></div>
              </div>
            ))}

            <div className={style.inputContents}>
              <input
                className={style.inputUsernameText}
                value={inputUsernameText}
                placeholder="ユーザー名入力"
                onChange={(e) => setInputUsernameText(e.target.value)}
              ></input>
              <textarea
                className={style.inputPostText}
                value={inputPostText}
                placeholder="投稿内容を入力"
                onChange={(e) => setInputPostText(e.target.value)}
              ></textarea>
              <button className={style.PostButton} onClick={onClickPostButton}>
                投稿
              </button>
            </div>
          </div>
        </div>

        <footer></footer>
      </div>
    </>
  );
}
